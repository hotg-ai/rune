<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Cross-platform virtual memory API."><meta name="keywords" content="rust, rustlang, rust-lang, region"><title>region - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../dark.css" disabled><link rel="stylesheet" type="text/css" href="../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../storage.js"></script><script src="../crates.js"></script><script defer src="../main.js"></script>
    <noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../favicon.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../region/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"></h2>
    </nav>
    <nav class="sidebar"><a class="sidebar-logo" href="../region/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"><a href="#">Crate region</a></h2><div class="sidebar-elems"><div class="block"><ul><li class="version">Version 3.0.0</li><li><a id="all-types" href="all.html">All Items</a></li></div></ul><section><div class="block"><ul><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#functions">Functions</a></li><li><a href="#types">Type Definitions</a></li></ul></div></section><div id="sidebar-vars" data-name="region" data-ty="mod" data-relpath=""></div><script defer src="sidebar-items.js"></script></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../region/index.html"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></a><nav class="sub"><div class="theme-picker hidden"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="22" height="22" alt="Pick another theme!" src="../brush.svg"></button><div id="theme-choices" role="menu"></div></div><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../wheel.svg"></a></div></form></nav></div><section id="main-content" class="content"><div class="main-heading">
    <h1 class="fqn"><span class="in-band">Crate <a class="mod" href="#">region</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span></h1><span class="out-of-band"><a class="srclink" href="../src/region/lib.rs.html#1-419">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Cross-platform virtual memory API.</p>
<p>This crate provides a cross-platform Rust API for querying and manipulating
virtual memory. It is a thin abstraction, with the underlying interaction
implemented using platform specific APIs (e.g <code>VirtualQuery</code>, <code>VirtualLock</code>,
<code>mprotect</code>, <code>mlock</code>). Albeit not all OS specific quirks are abstracted away;
for instance, some OSs enforce memory pages to be readable, whilst other may
prevent pages from becoming executable (i.e DEP).</p>
<p>This implementation operates with memory pages, which are aligned to the
operating system’s page size. On some systems, but not all, the system calls
for these operations require input to be aligned to a page boundary. To
remedy this inconsistency, whenever applicable, input is aligned to its
closest page boundary.</p>
<p><em>Note: a region is a collection of one or more pages laying consecutively in
memory, with the same properties.</em></p>
<h2 id="parallelism"><a href="#parallelism">Parallelism</a></h2>
<p>The properties of virtual memory pages can change at any time, unless all
threads that are unaccounted for in a process are stopped. Therefore to
obtain, e.g., a true picture of a process’ virtual memory, all other threads
must be halted. Otherwise, a region descriptor only represents a snapshot in
time.</p>
<h2 id="installation"><a href="#installation">Installation</a></h2>
<p>This crate is <a href="https://crates.io/crates/region">on crates.io</a> and can be
used by adding <code>region</code> to your dependencies in your project’s <code>Cargo.toml</code>.</p>
<div class="example-wrap"><pre class="language-toml"><code>[dependencies]
region = &quot;3.0.0&quot;</code></pre></div><h2 id="examples"><a href="#examples">Examples</a></h2>
<ul>
<li>
<p>Cross-platform equivalents.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let</span> <span class="ident">data</span> <span class="op">=</span> [<span class="number">0xDE</span>, <span class="number">0xAD</span>, <span class="number">0xBE</span>, <span class="number">0xEF</span>];

<span class="comment">// Page size</span>
<span class="kw">let</span> <span class="ident">pz</span> <span class="op">=</span> <span class="ident">region::page::size</span>();
<span class="kw">let</span> <span class="ident">pc</span> <span class="op">=</span> <span class="ident">region::page::ceil</span>(<span class="ident">data</span>.<span class="ident">as_ptr</span>());
<span class="kw">let</span> <span class="ident">pf</span> <span class="op">=</span> <span class="ident">region::page::floor</span>(<span class="ident">data</span>.<span class="ident">as_ptr</span>());

<span class="comment">// VirtualQuery | &#39;/proc/self/maps&#39;</span>
<span class="kw">let</span> <span class="ident">q</span>  <span class="op">=</span> <span class="ident">region::query</span>(<span class="ident">data</span>.<span class="ident">as_ptr</span>())<span class="question-mark">?</span>;
<span class="kw">let</span> <span class="ident">qr</span> <span class="op">=</span> <span class="ident">region::query_range</span>(<span class="ident">data</span>.<span class="ident">as_ptr</span>(), <span class="ident">data</span>.<span class="ident">len</span>())<span class="question-mark">?</span>;

<span class="comment">// VirtualAlloc | mmap</span>
<span class="kw">let</span> <span class="ident">alloc</span> <span class="op">=</span> <span class="ident">region::alloc</span>(<span class="number">100</span>, <span class="ident">Protection::READ_WRITE</span>)<span class="question-mark">?</span>;

<span class="comment">// VirtualProtect | mprotect</span>
<span class="ident">region::protect</span>(<span class="ident">data</span>.<span class="ident">as_ptr</span>(), <span class="ident">data</span>.<span class="ident">len</span>(), <span class="ident">Protection::READ_WRITE_EXECUTE</span>)<span class="question-mark">?</span>;

<span class="comment">// ... you can also temporarily change one or more pages&#39; protection</span>
<span class="kw">let</span> <span class="ident">handle</span> <span class="op">=</span> <span class="ident">region::protect_with_handle</span>(<span class="ident">data</span>.<span class="ident">as_ptr</span>(), <span class="ident">data</span>.<span class="ident">len</span>(), <span class="ident">Protection::READ_WRITE_EXECUTE</span>)<span class="question-mark">?</span>;

<span class="comment">// VirtualLock | mlock</span>
<span class="kw">let</span> <span class="ident">guard</span> <span class="op">=</span> <span class="ident">region::lock</span>(<span class="ident">data</span>.<span class="ident">as_ptr</span>(), <span class="ident">data</span>.<span class="ident">len</span>())<span class="question-mark">?</span>;</code></pre></div>
</li>
</ul>
</div></details><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="mod" href="page/index.html" title="region::page mod">page</a></div><div class="item-right docblock-short"><p>Page related functions.</p>
</div></div></div><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Allocation.html" title="region::Allocation struct">Allocation</a></div><div class="item-right docblock-short"><p>A handle to an owned region of memory.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.LockGuard.html" title="region::LockGuard struct">LockGuard</a></div><div class="item-right docblock-short"><p>A RAII implementation of a scoped lock.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ProtectGuard.html" title="region::ProtectGuard struct">ProtectGuard</a></div><div class="item-right docblock-short"><p>A RAII implementation of a scoped protection guard.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Protection.html" title="region::Protection struct">Protection</a></div><div class="item-right docblock-short"><p>A bitflag of zero or more protection attributes.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.QueryIter.html" title="region::QueryIter struct">QueryIter</a></div><div class="item-right docblock-short"><p>An iterator over the <a href="struct.Region.html" title="Region"><code>Region</code></a>s that encompass an address range.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Region.html" title="region::Region struct">Region</a></div><div class="item-right docblock-short"><p>A descriptor for a mapped memory region.</p>
</div></div></div><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.Error.html" title="region::Error enum">Error</a></div><div class="item-right docblock-short"><p>A collection of possible errors.</p>
</div></div></div><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.alloc.html" title="region::alloc fn">alloc</a></div><div class="item-right docblock-short"><p>Allocates one or more pages of memory, with a defined protection.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.alloc_at.html" title="region::alloc_at fn">alloc_at</a></div><div class="item-right docblock-short"><p>Allocates one or more pages of memory, at a specific address, with a defined
protection.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.lock.html" title="region::lock fn">lock</a></div><div class="item-right docblock-short"><p>Locks one or more memory regions to RAM.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.protect.html" title="region::protect fn">protect</a><a title="unsafe function" href="#"><sup>⚠</sup></a></div><div class="item-right docblock-short"><p>Changes the memory protection of one or more pages.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.protect_with_handle.html" title="region::protect_with_handle fn">protect_with_handle</a><a title="unsafe function" href="#"><sup>⚠</sup></a></div><div class="item-right docblock-short"><p>Temporarily changes the memory protection of one or more pages.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.query.html" title="region::query fn">query</a></div><div class="item-right docblock-short"><p>Queries the OS with an address, returning the region it resides within.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.query_range.html" title="region::query_range fn">query_range</a></div><div class="item-right docblock-short"><p>Queries the OS for mapped regions that overlap with the specified range.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.unlock.html" title="region::unlock fn">unlock</a></div><div class="item-right docblock-short"><p>Unlocks one or more memory regions from RAM.</p>
</div></div></div><h2 id="types" class="small-section-header"><a href="#types">Type Definitions</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="type" href="type.Result.html" title="region::Result type">Result</a></div><div class="item-right docblock-short"><p>The result type used by this library.</p>
</div></div></div></section><section id="search" class="content hidden"></section></div></main><div id="rustdoc-vars" data-root-path="../" data-current-crate="region" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.61.0-nightly (10cc7a6d0 2022-02-26)" ></div>
</body></html>